<!Doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>JavaScript中SetInterval与setTimeout</title>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>

    <script>
        var fadeBtn = document.getElementById("fade-btn");
        var fadeObj = document.getElementById("fade-obj");
        var speed; //渐变速度
        var opacity = 1000;
        // 淡出
        function fadeOut() {
            speed = -1;
            opacity += speed;
            fadeObj.style.opacity = opacity / 1000; //改变opacity的值
            if (opacity == 0) {
                fadeBtn.innerHTML = "淡入";
                fadeBtn.disabled = false;
                clearInterval(fadeOutId);
            }
        }
        // 淡入
        function fadeIn() {
            speed = 1;
            opacity += speed;
            fadeObj.style.opacity = opacity / 1000;
            if (opacity == 1000) {
                fadeBtn.innerHTML = "淡出";
                fadeBtn.disabled = false;
                clearInterval(fadeInId);
            }
        }

        fadeBtn.onclick = function () {
            if (fadeBtn.innerHTML == "淡出") {
                fadeBtn.disabled = true; //停用按钮
                fadeOutId = setInterval(fadeOut, 1);
            } else if (fadeBtn.innerHTML == "淡入") {
                fadeBtn.disabled = true;
                fadeInId = setInterval(fadeIn, 1);
            }

        }
    </script>
</body>

</html>